{% extends "base.html" %}

{% block body %}
<script>
    results = [
    {% for item, pre, norm in form.recs %}
    {title:"{{item.name}}",p:{{pre}},normp:{{norm}}},
    {% endfor %}
    ];
    function more(){
        for(var i=0; i<5 && results.length>0; i++){
            res = results.pop();
            $('#main').append('<tr><td>'+res.title+'</td><td>'+res.p+'</td></tr>');
        }
        if(results.length ==0) $('#more_btn').attr('disabled','');
    }
    $(function(){
        more();
    });
    function reclist(q){
        $('#main').html('');
        $('#more_btn').removeAttr('disabled');
        $.getJSON('/movie/reclist/?'+q,function(obj){results=obj;more();});
    }
</script>
<form id="tags">
<input type="checkbox" name="tag" value="sci-fi">sci-fi
<input type="checkbox" name="tag" value="drama">drama
<input type="checkbox" name="tag" value="fantasy">fantasy
<input type="checkbox" name="tag" value="action">action
<input type="checkbox" name="tag" value="thriller">thriller
</form>
<button id="filter_btn" onclick="reclist($('#tags').serialize());" >filter</button>
<button id="clear_btn" onclick="reclist('');$('input:checked').removeAttr('checked');" >clear</button>

<h2> Recommendations for {{ user.username }} </h2>
<br\><br\>


<table id="main" border="1">
</table>
<button id="more_btn" onclick="more();" >more</button>


{% endblock %}


